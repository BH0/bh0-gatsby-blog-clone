<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/bh0-gatsby-blog/component---src-layouts-index-js-0daa32273e60afa343b1.js" as="script"/><link rel="preload" href="/bh0-gatsby-blog/component---src-templates-post-js-2e252a06fd8b622390cf.js" as="script"/><link rel="preload" href="/bh0-gatsby-blog/path---a-very-insecure-ajax-social-network-b4f915cc3f40ec68245a.js" as="script"/><link rel="preload" href="/bh0-gatsby-blog/app-f8241cf311a390035484.js" as="script"/><link rel="preload" href="/bh0-gatsby-blog/commons-403258ad126d5c26671b.js" as="script"/><title data-react-helmet="true">BH0&#x27;s Blog</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><style id="gatsby-inlined-css">a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}div{padding:.1em}.blue{color:blue}.red{color:red}.yellow{color:#ff0}.green{color:green}.center{text-align:center}.website-title p{font-size:1em;letter-spacing:-1px;display:inline}.website-title p:nth-child(5){margin-left:.5em}.search{padding-top:.8em;padding-bottom:1em}.search input{border:.2px solid silver;width:100%}.search input:focus{border:1px solid blue;padding:0}.navigation{border:1px solid silver;padding-top:0;margin-bottom:.5em}.navigation a{color:#504f4f;font-size:1.2em;box-shadow:1px;padding-left:1em}.navigation a:hover{color:blue;border-bottom:1em;border-bottom-color:blue;text-decoration:underline}@media only screen and (max-width:600px){.navigation a{font-size:.8em;padding-left:.5em}}.mobile .articles-container{border:1px solid silver;border-radius:.5em;padding:.2em}.mobile .article-container{padding:1em}.mobile .article-container .anchor-tag{text-decoration:none;font-size:1.1em;margin-bottom:-2em}.mobile .article-container p:first-of-type{color:#006400;font-size:.8em;padding-top:.2em;padding-bottom:1em;border-bottom:1px solid;border-bottom-color:silver}.mobile .article-container p{color:#636161;padding-top:1.5em;margin-bottom:-.4em}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-1614132819"><!-- react-empty: 2 --><div class="website-title center" data-reactid="3"><p class="blue" data-reactid="4">B</p><p class="red" data-reactid="5">H</p><p class="yellow" data-reactid="6">0&#x27;</p><p class="blue" data-reactid="7">S</p><p class="green" data-reactid="8">B</p><p class="yellow" data-reactid="9">L</p><p class="blue" data-reactid="10">O</p><p class="red" data-reactid="11">G</p></div><div class="search center" data-reactid="12"><input type="text" placeholder="Enter search term" data-reactid="13"/></div><div class="navigation center" data-reactid="14"><a href="/bh0-gatsby-blog/" data-reactid="15">Recent</a><a href="/bh0-gatsby-blog/archives/" data-reactid="16">Archives</a><a href="/bh0-gatsby-blog/" data-reactid="17">Most viewed</a><a href="/bh0-gatsby-blog/" data-reactid="18">About</a></div><div class="mobile articles-container" data-reactid="19"><div data-reactid="20"><a href="/bh0-gatsby-blog/" data-reactid="21">Return home</a><h2 class="sub-title" data-reactid="22">A Very Insecure AJAX Social Network</h2><div data-reactid="23"><hr>
<p>path: "/a-very-insecure-ajax-social-network"
title: "A Very Insecure AJAX Social Network"
published: true
date: "26-05-2018" </p>
<hr>
<h1>What We Will Build</h1>
<p>In this blog post, we will learn how to create a VERY INSECURE web application using  HTML, Javascript and PHP. We will learn how to make AJAX requests, work with JSON files and basic DOM manipulation. We are going to make a simple "social network" application, which allows users to create an account and have a discussion. </p>
<!-- More --> 
<h1>I Mean Insecure</h1>
<p>This by no means is a production easy application. This is a tutorial to allow you to get your feet wet in Javascript whilst making something cool. The application lacks various security features - most notably encryption and thus data protection. Though having said this, you can easily add some security features to this application with the right kind of research - maybe I will touch on that in the future. </p>
<h1>The Setup and Terminology</h1>
<p>I assume you know some basic web programming concepts. And HTML, so assuming you have an HTML file ready; here is the HTML. Make sure to create a file called, "users.json", "comments.json", "createItem.php" and optionally a Javascript file (or just
use script tags) inside the root of your folder (or wherever else appropriate),  </p>
<p>We also need to use a (development) web server that can run PHP, I have done a tutorial using Laragon, MAMP, WAMP etcetera are good choices too.  before so feel free to check that out, Once you have an appropriate web server ready to use, feel free to proceed - otherwise you will not be able to use the PHP. code </p>
<div class="gatsby-highlight" data-language="html">
      <pre class="language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- Sign In --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username-login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password-login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span> 

        <span class="token comment">&lt;!-- Sign Up --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>create-account-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username-create<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password-create<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>create-account<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Create Account<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span> 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> 

        <span class="token comment">&lt;!-- Post Comment --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post-comment-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>Post Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>  
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>send-comment<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Send Comment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span> 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> 
        
        <span class="token comment">&lt;!-- Comments --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>refresh<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Refresh<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments-section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
                <span class="token comment">&lt;!-- comments will be displayed here thanks to JS --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript"> 
		<span class="token comment">/* Javascript can go here */</span> 
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span> </code></pre>
      </div>
<h1>Terminoloy</h1>
<ul>
<li>Laragon - A development tool which allows us to use Apache server and PHP. </li>
<li>JSON - A format for data </li>
<li>Client side - what the browser sees </li>
<li>Server side - what the server sees </li>
<li>Request - Browser asks for something </li>
<li>AJAX [Request] - A type of request which can be made (and forgotten about) and does not cause a reload </li>
<li>DOM - The document object model (how the browser and Javascript * understands our HTML) </li>
<li>DOM Manipulation - Interacting with and manipulating the DOM </li>
<li>XmlHttpRequest - The Javascript object we use to send AJAX requests </li>
<li>HTTP Methods - At least Create (post) and Read (get) [types of requests] </li>
</ul>
<p>Instead of XML, we use JSON - I strongly recommend you investigate the aforementioned terms as it will solidify your understanding of the code we produce. </p>
<h1>The Code</h1>
<p>We first have to initialize an array, a boolean variable and an empty object so that we have access to them in the global scope of our code. </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token comment">/// Initialize Variables so they can be used in varying scopes </span>
        <span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
        <span class="token keyword">let</span> userIsLoggedInBool<span class="token punctuation">;</span> 
        <span class="token keyword">let</span> currentUser <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> </code></pre>
      </div>
<p>We use an event listener which will run code when the document is loaded, this code will hide our comment input areas, our program assumes no user is logged in, and we do not want a user that has not yet signed up/in to make posts.   </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token comment">/// Hide Section  which require Authentication  </span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> e <span class="token operator">=></span>  <span class="token punctuation">{</span>
            createCommentButton<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 
            createCommentSection<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<h2>Create Account Javascript Code</h2>
<p>We use getElementById to get the appropriate HTML for later use, we then attach an event listener to our "createAccountButton" which will invoke a create account function when clicked - assuming the user has not yet logged in. </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token comment">/// Create Account </span>
        <span class="token keyword">let</span> createAccountButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"create-account"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">let</span> usernameCreateAccount <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"username-create"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">let</span> passwordCreateAccount <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"password-create"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        createAccountButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> e <span class="token operator">=></span> <span class="token punctuation">{</span> 
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">if</span> <span class="token punctuation">(</span>loginButton<span class="token punctuation">.</span>innerText <span class="token operator">==</span> <span class="token string">"Login"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token function">createAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre>
      </div>
<p>Our createAccount function will: get the values from the input field, use them to create a "user" object, we then turn this object in to JSON and send a POST AJAX. As client-side Javascript does not have access to our filesystem, we will instead use a PHP script for the actual saving of the data to a file. This code will run that script and give it the appropriate data. I believe we are sending as a hyperlink (reffered to as request parameters). </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token keyword">function</span> <span class="token function">createAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">"username"</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'username-create'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span> 
                <span class="token string">"password"</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'password-create'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value 
            <span class="token punctuation">}</span> 
            <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token string">"user="</span><span class="token operator">+</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'createItem.php'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> 
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> </code></pre>
      </div>
<p>Once we have gotten the data (username and password) that our user (from the URL/hyperlink) will contain [by using AJAX], we have to use PHP (or any server-side language script) save the data, as client-side Javascript does not have access to the users filesystem (for security reasons). </p>
<p>This code, will firstly: check the user data exists, then we get our existing data from our JSON file. to make things easier we turn our existing data into data that we can work with, we then update our data with our new user, and lastly, we save our new data into the JSON file as JSON data (for later use). </p>
<div class="gatsby-highlight" data-language="php">
      <pre class="language-php"><code class="language-php"><span class="token delimiter important">&lt;?php</span> 
    <span class="token comment">//// Create Item (User and Comment) </span>

    <span class="token comment">/// Save User </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token variable">$jsonUsers</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token variable">$users</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$jsonUsers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$users</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users.json'</span><span class="token punctuation">,</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> </code></pre>
      </div>
<h2>Login</h2>
<p>Now that user has created an account, we want to give them the ability to log in. As this is a very insecure application, we do this using a GET request, but you should do this on the server side in a production application. </p>
<p>Similar to before, we get the corresponding HTML, and give our login button an event listener, which will either log the user out if they are logged in, otherwise, it will validate their username and password by comparing it with our existing user data and log the user in. </p>
<p>If the user is logged in our event listener will call the logout function (as the text will be "Logout"). </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token comment">/// Login </span>
        <span class="token keyword">let</span> loginButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">let</span> usernameLogin <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"username-login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">let</span> passwordLogin <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"password-login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        loginButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> e <span class="token operator">=></span> <span class="token punctuation">{</span> 
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">if</span> <span class="token punctuation">(</span>loginButton<span class="token punctuation">.</span>innerText <span class="token operator">==</span> <span class="token string">"Logout"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token function">loggedOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>loginButton<span class="token punctuation">.</span>innerText <span class="token operator">==</span> <span class="token string">"Login"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token function">loadUsersAndLogin</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre>
      </div>
<p>We send a GET request to our "users.json" file, then turn the data from a string into a Javascript object (as JSON stands for JavaScript Object Notation). We then loop through each of our users and compares said user with the data that the user has inputted. </p>
<p>With the assumption that it is correct, we will proceed to log the user in, we store the appropriate user in our currentUser object so we can use it throughout our application. In my code I have put an alert to inform the user if their entered password is incorrect; but, this is of course optional. We then hide and display the appropriate HTML. For example, if the user is logged in, we do not want to let them create an account. </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token keyword">function</span> <span class="token function">loadUsersAndLogin</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'users.json'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

            xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                    users <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> users<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>users<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>username <span class="token operator">==</span> usernameLogin<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>users<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>password <span class="token operator">==</span> passwordLogin<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                                userIsLoggedInBool <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
                                loginButton<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"Logout"</span><span class="token punctuation">;</span>                                
                                currentUser <span class="token operator">=</span> <span class="token punctuation">{</span> 
                                     username<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>users<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span> 
                                     password<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>users<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>password 
                                <span class="token punctuation">}</span>  
                                <span class="token comment">/// Hide Appropriate Elements </span>
                                usernameLogin<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 
                                passwordLogin<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 
                                usernameCreateAccount<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 
                                passwordCreateAccount<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 
                                createAccountButton<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 

                                <span class="token comment">/// Show Appropriate Elements </span>
                                createCommentSection<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span> 
                                createCommentButton<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span> 

                                loginButton<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"Logout"</span><span class="token punctuation">;</span>                                
                                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"authenticated..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
                                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Incorrect password. "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                                <span class="token keyword">break</span><span class="token punctuation">;</span> 
                            <span class="token punctuation">}</span> 
                        <span class="token punctuation">}</span> 
                    <span class="token punctuation">}</span>  
                <span class="token punctuation">}</span> 
            <span class="token punctuation">}</span> 
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> </code></pre>
      </div>
<h2>Logout</h2>
<p>Now that the user can log in, we want to give them the option to log out. To accomplish this, we invoke a function which hides and displays the appropriate HMTL. Essentially does the opposite to our login function. We also want to make our currentUser an empty object. </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token comment">/// Logout </span>
        <span class="token keyword">function</span> <span class="token function">loggedOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            usernameLogin<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"inline"</span><span class="token punctuation">;</span> 
            passwordLogin<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"inline"</span><span class="token punctuation">;</span> 
            usernameCreateAccount<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"inline"</span><span class="token punctuation">;</span> 
            passwordCreateAccount<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"inline"</span><span class="token punctuation">;</span> 
            createAccountButton<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"inline"</span><span class="token punctuation">;</span> 

            createCommentSection<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 
            createCommentButton<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span> 

            loginButton<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"Login"</span><span class="token punctuation">;</span> 

            currentUser <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> </code></pre>
      </div>
<h2>Displaying Comments</h2>
<p>We can automatically update our comment section using the setInterval function, but we also give the user a button to allow them to manually do this. </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token comment">/// Display Comments </span>
        <span class="token keyword">let</span> commentsDivs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> e <span class="token operator">=></span> <span class="token punctuation">{</span> 
            <span class="token function">loadComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token function">setInterval</span><span class="token punctuation">(</span>loadComments<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre>
      </div>
<p>Our load comments function will, make a GET request to comments file, remember it is easier in our case to use JSON, thus we turn our data into JSON format. We then loop through each comment and do some DOM manipulation to generate the HTML which will display our comment. We also want to keep track of our comments so we store them inside an array - we call this array "commentsDivs". </p>
<p>At the beginning of our "loadComments" function we loop through our existing "commentsDivs" array, and remove each comment - if we did not do this, then duplicate comments would be displayed, and that in my opinion is a waste of space and will make keeping track of conversations difficult for our users. </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token keyword">function</span> <span class="token function">loadComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            commentsDivs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>comment <span class="token operator">=></span> <span class="token punctuation">{</span> 
                comment<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

            <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'comments.json'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">let</span> comments <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> comments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                        <span class="token keyword">let</span> commentDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                        <span class="token keyword">let</span> comment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`
                            </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>comments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> said: 
                            </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>comments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 
                        `</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                        commentDiv<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                        commentSection<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>commentDiv<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                        commentsDivs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>commentDiv<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token punctuation">}</span>                     
                <span class="token punctuation">}</span> 
            <span class="token punctuation">}</span> 
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span></code></pre>
      </div>
<h2>Post Comment</h2>
<p>Okay, we can create an account, we can log into our account, we can log out of our account. and we can read comments - but we can not comment, so let us fix that. We attach an event listener which will check to see if the user commands our page to send a comment (with the assumption that they are logged in. </p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">        <span class="token keyword">function</span> <span class="token function">createComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">let</span> comment <span class="token operator">=</span> <span class="token punctuation">{</span> 
                <span class="token string">"author"</span><span class="token punctuation">:</span> currentUser<span class="token punctuation">.</span>username<span class="token punctuation">,</span> 
                <span class="token string">"content"</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value 
            <span class="token punctuation">}</span> 
            <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token string">"comment="</span><span class="token operator">+</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'createItem.php'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token function">loadComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> </code></pre>
      </div>
<p>To save a comment, we essentially do the exact same thing as we did when saving a user.     </p>
<div class="gatsby-highlight" data-language="php">
      <pre class="language-php"><code class="language-php">    <span class="token comment">/// Save Comment </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'comment'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// check comment data exists </span>
        <span class="token variable">$jsonComments</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comments.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get JSON data </span>
        <span class="token variable">$comments</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$jsonComments</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// turn JSON data into usable data </span>
        <span class="token variable">$comments</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'comment'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// update data </span>
        <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comments.json'</span><span class="token punctuation">,</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$comments</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// save data </span>
    <span class="token punctuation">}</span> </code></pre>
      </div>
<h1>Conclusion</h1>
<p>With the assumption that we are free of issues and errors, we should have a simple web-app which allows multiple users to have a group discussion in real time. </p>
<h1>What Now?</h1>
<p>Now, you can do so much now - or at least learn how to. For example, our application looks ugly, feel free to style it up. Or, perhaps you enjoy security - in that case, I challenge you to implement encryption (and decryption). Or, maybe you just want to add more features to practice, do it! Long story short, if you truly enjoy software development, never give up. Thanks for reading. </p></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-f8241cf311a390035484.js","195351340454287":"component---src-templates-post-js-2e252a06fd8b622390cf.js","162898551421021":"component---src-pages-404-js-8bc3c0b1f2e45fb8d20b.js","106735565224735":"component---src-pages-archives-js-06d6a249cec29a31c95d.js","35783957827783":"component---src-pages-index-js-58b941226aada08694d6.js","60335399758886":"path----5277639caf9b52094069.js","36450160171835":"path---a-very-insecure-ajax-social-network-b4f915cc3f40ec68245a.js","147310052684615":"path---advantages-of-asking-for-help-7a1c94d9425758e566df.js","212017324770873":"path---actionscript-flappy-bird-clone-55defcc6a9c58796611e.js","186878683825659":"path---an-implication-of-the-important-css-rule-caec0d6fca50d1536e02.js","275350871480640":"path---android-java-react-native-same-app-my-experience-8a147535fcfd3e89d9ac.js","178735522292160":"path---farewell-hexo-hello-gatsby-3b9951f829234e364f48.js","227123660561234":"path---html-css-colour-cycling-effect-2f8ce8527ac0555635b8.js","2786945604662":"path---html-css-traffic-lights-1-21249c848ec49e89830d.js","30754843142833":"path---html-js-swear-word-detector-d6f9d8743bc41dadda8e.js","141909243767928":"path---interactive-web-pages-for-noobs-622ce6de9ec507cafba8.js","253154823429196":"path---introduction-to-arduino-tinkercad-f8a01bf6583661a36e52.js","236932202057171":"path---i-ve-never-met-my-greatest-heroes-35c89c405d360cf79b79.js","280965488678553":"path---js-html-css-working-with-classes-1c30ebfdcb99222bcd50.js","64672452356029":"path---a-simplified-introduction-to-objects-in-javascript-3bf8c09df8264b57ae64.js","40081024087601":"path---learn-the-basics-of-brainfuck-and-pseudocode-f59eccd6d8bba412de5e.js","219786251585598":"path---my-2017-arduino-projects-db7b3941a421289dacb7.js","26184778596085":"path---program-for-fifteen-minutes-51022a94fa7bad3690bd.js","69120697091644":"path---rush-or-take-time-coding-b050ed9e3df51f4f0981.js","234112663222527":"path---thankyou-madebrave-f0507ea838530d9237f4.js","222057917208378":"path---react-navmenu-component-using-context-api-a32bbc021f84508acd04.js","76857626116648":"path---theres-two-javascripts-ac0306a6d3654e9b1040.js","151630101828156":"path---unit-testing-js-with-jest-fe51c44fd6f3f1fa2cc7.js","40172022505595":"path---visual-basic-introduction-guess-my-number-dbfbb24b75be9fb8fa42.js","150704215788825":"path---when-automation-is-moral-my-opinion-ae1943385cee824e3a91.js","134508585258180":"path---when-youre-ready-5c43cf55b7480ef50d6f.js","126088195556249":"path---why-i-avoid-form-designers-34246528f63f95482def.js","278691930453787":"path---why-i-chose-javascript-f8ae4bc9f6b897d0b22e.js","228043823934728":"path---why-i-don-t-use-wordpress-for-my-blog-90dc283f9c6ca9896e89.js","94139463393558":"path---windows-form-c-sound-player-app-15000215660863cdd5eb.js","124252182539965":"path---wordpress-itself-is-not-a-website-builder-4aa4633fad03e6fea299.js","32974387278668":"path---yii-quick-setup-php-5d0ebd8e67464744abaf.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","66145460603085":"path---archives-fe90ea694e0cc7ada237.js","142629428675168":"path---index-bd581908d35bd2e427bb.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-0daa32273e60afa343b1.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/bh0-gatsby-blog/commons-403258ad126d5c26671b.js","/bh0-gatsby-blog/app-f8241cf311a390035484.js","/bh0-gatsby-blog/path---a-very-insecure-ajax-social-network-b4f915cc3f40ec68245a.js","/bh0-gatsby-blog/component---src-templates-post-js-2e252a06fd8b622390cf.js","/bh0-gatsby-blog/component---src-layouts-index-js-0daa32273e60afa343b1.js"])/*]]>*/</script></body></html>